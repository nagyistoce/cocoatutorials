<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<meta http-equiv="Content-Language" content="en-us">

<title>ContentFlow Test</title>

<link rel="stylesheet" type="text/css" href="contentflow.css">
<script language="JavaScript" type="text/javascript" src="contentflow.js"></script>

<link href="library/fullsize/fullsize.css" media="screen" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="library/jquery.js"></script></head>
<script type="text/javascript" src="library/fullsize/jquery.fullsize.js"></script></head> 

<script>
var myFlow ;
var photo;
var ratio;

function findPos(obj)
{
	var curleft = curtop = 0;
	try {
		if (obj.offsetParent) {
			do {
				curleft += obj.offsetLeft;
				curtop  += obj.offsetTop;
			} while (obj = obj.offsetParent);
		}
	} catch ( e ) {} ;
	return [curleft,curtop];
}

function px(n) { return '' + n + 'px' ; }

function resize()
{
    var border  =      20 ; // border all round
    var top     =       0 ; // additional top border
    var Top     = parseInt(myFlow.maxHeight * 1.0);

    console.log("Top = " , Top) ;

    var which   = "photo" ;
    photo       = document.getElementById(which)
    var elem    = photo ;
    if ( !elem ) return false;

    if ( !ratio )
        ratio   = elem.height/elem.width;

    // what's the biggest width and height of the photo?
    var width   = window.innerWidth  - border - border  ; // document.body.clientWidth;
    var height  = window.innerHeight - border - border - Top - top ; // document.body.clientHeight-top-Top;

    var  aspect = height/width;
    if ( aspect > ratio ) {
      height    = parseInt(width*ratio) ;
    } else {
      width     = parseInt(height/ratio);
    }
    //elem.style.top   = px(Top-border-window.innerHeight/2)  ; // + (height - elem.height)/2 ;
    //elem.style.left  = px((window.innerWidth - width )/2) ;
    elem.style.top   = px(myFlow.maxHeight * -0.5);
    elem.style.height= px(height) ;
    elem.style.width = px(width)  ;
    //console.log( "top = "    + elem.style.top
    //           +" left = "   + elem.style.left
    //           +" height = " + elem.style.height
    //           +" width = "  + elem.style.width
    //           );
}

function initCallbacks()
{
	myFlow.conf.onMakeActiveOld = myFlow.conf.onMakeActive;
	myFlow.conf.onMakeActive = function(item) {
		show(item.content.getAttribute('src')) ;
		myFlow.conf.onMakeActiveOld(item);
	}
	myFlow.conf.onclickActiveItem = function(item) {}
}

function show(photo)
{
	console.log(photo) ;

    var which = "photo" ;    
    var elem = document.getElementById(which);
    if (elem == undefined || elem == null) return false;

	elem.src = photo;
	elem.style.border="10px solid white";
    elem.setAttribute('longdesc',photo);

//  alert('ok');
//  $(function(){ $("img").fullsize(); });
//  elem.fullsize();
//  alert('right');
}
</script>

<script>
	myFlow = new ContentFlow('myFlow',
	{ reflectionHeight 	: 1
	, circularFlow		: true
	, verticalFlowX		: true
	, startItem         : 3
	, visibleItems      : 5
	, loadingTimeout    : 60000
	, endOpacity        : 1.0
	, scaleFactor       : 1.5
	}
	);
</script>

<script type="text/javascript">
	$(function(){ 		$("img").fullsize(); });
</script>

</head>
<body onload="initCallbacks();" style="background:black;" onresize="resize();">
<center>
        <div class="ContentFlow" name="myFlow" id="myFlow">
            <div class="loadIndicator"><div class="indicator"></div></div>
            <div class="flow">
                <img class="item" src="Images/IMG_2500.jpg" longdesc="Images/IMG_2500.jpg" style="border:0px solid white;" title="Dennis and Terri" onclick="show('Images/IMG_2500.jpg')"/>
                <img class="item" src="Images/IMG_2501.jpg" longdesc="Images/IMG_2501.jpg" style="border:0px solid white;" title="Where it all began"  onclick="show('Images/IMG_2501.jpg')"/>
                <img class="item" src="Images/IMG_2502.jpg" longdesc="Images/IMG_2502.jpg" style="border:0px solid white;" title="Ali with her boys"  onclick="show('Images/IMG_2502.jpg')"/>
                <img class="item" src="Images/IMG_2504.jpg" longdesc="Images/IMG_2504.jpg" style="border:0px solid white;" title="Google Android"  onclick="show('Images/IMG_2504.jpg')"/>
                <img class="item" src="Images/IMG_2505.jpg" style="border:0px solid white;" title="Google Sign"  onclick="show('Images/IMG_2505.jpg')"/>
                <img class="item" src="Images/IMG_2506.jpg" style="border:0px solid white;" title="Art"  onclick="show('Images/IMG_2506.jpg')"/>
                <img class="item" src="Images/IMG_2507.jpg" style="border:0px solid white;" title="Android Office"  onclick="show('Images/IMG_2507.jpg')"/>
                <img class="item" src="Images/IMG_2509.jpg" style="border:0px solid white;" title="Mills Family"  onclick="show('Images/IMG_2509.jpg')"/>
                <img class="item" src="Images/IMG_2510.jpg" style="border:0px solid white;" title="Google fun"  onclick="show('Images/IMG_2510.jpg')"/>
                <img class="item" src="Images/IMG_2511.jpg" style="border:0px solid white;" title="Lance"  onclick="show('Images/IMG_2511.jpg')"/>
                <img class="item" src="Images/IMG_2512.jpg" style="border:0px solid white;" title="Back at the car"  onclick="show('Images/IMG_2512.jpg')"/>
                <img class="item" src="Images/IMG_2513.jpg" style="border:0px solid white;" title="Google Maps"  onclick="show('Images/IMG_2513.jpg')"/>
                <img class="item" src="Images/IMG_2514.jpg" style="border:0px solid white;" title="Ali and Jamie"  onclick="show('Images/IMG_2514.jpg')"/>
                <img class="item" src="Images/IMG_2516.jpg" style="border:0px solid white;" title="Jamie in Target"  onclick="show('Images/IMG_2516.jpg')"/>
                <img class="item" src="Images/IMG_2517.jpg" style="border:0px solid white;" title="SFO International"  onclick="show('Images/IMG_2517.jpg')"/>
                <img class="item" src="Images/IMG_2518.jpg" style="border:0px solid white;" title="Alan, Ali and Jamie"  onclick="show('Images/IMG_2518.jpg')"/>
                <img class="item" src="Images/IMG_2519.jpg" style="border:0px solid white;" title="Jamie and iPhone"  onclick="show('Images/IMG_2519.jpg')"/>
                <img class="item" src="Images/IMG_2520.jpg" style="border:0px solid white;" title="Alan and Ali"  onclick="show('Images/IMG_2520.jpg')"/>
                <img class="item" src="Images/IMG_2521.jpg" style="border:0px solid white;" title="BA 747 (flashed)"  onclick="show('Images/IMG_2521.jpg')"/>
                <img class="item" src="Images/IMG_2522.jpg" style="border:0px solid white;" title="BA 747 (not flashed)"  onclick="show('Images/IMG_2522.jpg')"/>
            </div>
            <div class="scrollbar"><div class="slider"><div class="position"></div></div></div>
            <div class="globalCaption"></div>
        </div>
        <img name="photo" id="photo" longdesc="Images/IMG_2522.jpg" style="z-index:100;top:0px;width:400;height:300;position:relative;">
</center>

</body>
</html>
