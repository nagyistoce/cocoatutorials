#!/bin/bash

if [ $# -lt 1 ];then
	echo pingz servername [command...]
        echo example: pingz rmills-imac ssh \\\$ping
	exit 1
fi

ping="$1"
shift
st=1
while [ $st -ne 0 ]; do
	ping -c 1 $ping 2>&1 > /dev/null
	st=$?
	if [ $st -ne 0 ]; then
		echo $ping is DEAD
		sleep 1	
	fi
	ping -c 1 $ping | egrep -e bytes # -e loss
	if [ $# -gt 0 ];then
		echo $ `eval "$@"`
		eval "$@"
	fi
done

# That's all Folks!
##
