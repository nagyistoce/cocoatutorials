#!/usr/bin/python
# -*- coding: UTF-8 -*-

import os
import sys
import lxml.etree as etree

def syntax(me):
	"""syntax - print syntax of webby.py """
	me=os.path.basename(os.path.abspath(me))
	print 'syntax: %s [--flat] filename ...'%(me)

def main(argv):
	"""main - main program of course"""
	argc = len(argv)
	result=0
	pretty=True
	if argc >= 2:
		try:
			for arg in argv[1:]:
				if arg=='-f' or arg=='--flat' or arg=='-flat':
					pretty=False
				else:
					x = etree.parse(arg)
					x = etree.tostring(x, pretty_print = True)
					if not pretty:
						x = x.replace('\n',' ')
					print x
		except Exception as inst:
			print >> sys.stderr, '-------------------' 
			print >> sys.stderr, inst, 'name = ',inst.args
			os.system('file ' + arg + ' 1>&2')
			print >> sys.stderr, '-------------------' 
			result=1
	else:
		syntax(argv[0])
	
	return result;

##
#
if __name__ == '__main__':
	sys.exit(main(sys.argv))

# That's all Folks!
##
