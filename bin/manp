#!/bin/csh

# man -t man | open -f -a /Applications/Preview.app/

# set echo=1

#
# set up a temporary directory if necessary
if ( ! -e ~/temp ) then
	mkdir -f ~/temp
endif


#
# names of the .ps and .pdf files
set c=$#argv
if ( $c == 1 ) then
	set c=
endif

set p=$argv[$#argv]$c
set ps=~/temp/$p.ps
set pdf=~/temp/$p.pdf

if ( -z $ps ) then
	rm $ps
endif

if ( ! -e $ps ) then
	man -t $* > $ps
endif

# if OK, got postscript, no pdf and not empty
if ( ( ! $status )  && ( -e $ps ) && ( ! -e $pdf ) && ( ! -z $ps ) ) then
	pstopdf $ps -o $pdf
endif


if ( -e $pdf ) then
	open $pdf
endif


