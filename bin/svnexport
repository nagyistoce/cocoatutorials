#!/bin/bash

syntax() {
    echo syntax: $0 svn-dir export-dir
    exit 1
}

run() {
    # echo --- $@ ---
    eval $@
}

##
# parse command line
if [ $# != 2 ]; then
	syntax
fi

svn="$1"
exp="$2"

# ensure $exp ends with '/'
[[ $exp != */ ]] && exp="$exp"/

##
# test arguments
if [ ! -d "$svn" ]; then
    echo directory $svn does not exist
    exit 1
fi

if [ ! -d "$exp" ]; then
    echo directory $exp does not exist
    exit 1
fi

##
# do the business
for i in $(svn status -q "$svn"|grep '^[M|A]' |sed -e "s/^[M|A]//g"); do
    run cp "$i" $exp$(basename $i)
    run ls -alt ${exp}$(basename $i)
done

# That's all Folks!
##